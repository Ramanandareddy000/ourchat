### Variables
@baseUrl = http://localhost:3002/api
@testMessageId = 1
@testUserId = 1
@testConversationId = 111

### ===========================================
### MESSAGE MANAGEMENT ENDPOINTS
### ===========================================

### Create Message (Direct)
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "conversation_id": {{testConversationId}},
  "sender_id": {{testUserId}},
  "text": "Test message created directly"
}

### Expected Response: 201 Created with message object

###

### Get All Messages
GET {{baseUrl}}/messages
Accept: application/json

### Expected Response:
### {
###   "data": [...messages],
###   "success": true
### }

###

### Get Message by ID (Valid)
GET {{baseUrl}}/messages/{{testMessageId}}
Accept: application/json

### Expected Response:
### {
###   "data": {message object},
###   "success": true
### }

###

### Get Message by ID (Invalid)
GET {{baseUrl}}/messages/99999
Accept: application/json

### Expected Response: 404 Not Found

###

### Get Messages by User ID (Valid)
GET {{baseUrl}}/messages/user/{{testUserId}}
Accept: application/json

### Expected Response:
### {
###   "data": [
###     {
###       "id": 1,
###       "conversation_id": 111,
###       "sender_id": 1,
###       "text": "message text",
###       "created_at": "2025-09-18T...",
###       "sender_username": "username",
###       "sender_avatar": null
###     }
###   ],
###   "success": true
### }

###

### Get Messages by User ID (Invalid User)
GET {{baseUrl}}/messages/user/99999
Accept: application/json

### Expected Response: Empty array (no messages)

###

### Get User Conversations
GET {{baseUrl}}/messages/user/{{testUserId}}/conversations
Accept: application/json

### Expected Response: Array of enriched conversation objects

###

### Get Messages by Conversation ID (Valid)
GET {{baseUrl}}/messages/conversation/{{testConversationId}}
Accept: application/json

### Expected Response:
### {
###   "data": [
###     {
###       "id": 1,
###       "conversation_id": 111,
###       "sender_id": 1,
###       "text": "message text",
###       "created_at": "2025-09-18T...",
###       "sender_username": "username",
###       "sender_avatar": null
###     }
###   ],
###   "success": true
### }

###

### Get Messages by Conversation ID (Invalid)
GET {{baseUrl}}/messages/conversation/99999
Accept: application/json

### Expected Response: Empty array

###

### Update Message (Valid)
PUT {{baseUrl}}/messages/{{testMessageId}}
Content-Type: application/json

{
  "text": "Updated message text"
}

### Expected Response:
### {
###   "data": {updated message object},
###   "success": true
### }

###

### Update Message (Invalid ID)
PUT {{baseUrl}}/messages/99999
Content-Type: application/json

{
  "text": "Updated text"
}

### Expected Response: 404 Not Found

###

### Delete Message (Valid)
# Note: Be careful - this actually deletes the message
# DELETE {{baseUrl}}/messages/{{testMessageId}}

### Expected Response:
### {
###   "data": null,
###   "success": true
### }

###

### Delete Message (Invalid ID)
DELETE {{baseUrl}}/messages/99999

### Expected Response: 404 Not Found